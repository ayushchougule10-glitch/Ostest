#include <stdio.h> 
 
int findLRU(int time[], int n) { 
    int i, min = time[0], pos = 0; 
    for (i = 1; i < n; i++) { 
        if (time[i] < min) { 
            min = time[i]; 
            pos = i; 
        } 
    } 
    return pos; 
} 
 
int main() { 
    int pages[50], frames[10], time[10]; 
    int n, f, i, j, counter = 0, pos; 
    int faults = 0, hits = 0; 
    float hit_ratio, fault_ratio; 
 
    printf("Enter number of pages: "); 
    scanf("%d", &n); 
 
    printf("Enter the page reference string: "); 
    for (i = 0; i < n; i++) 
        scanf("%d", &pages[i]); 
 
    printf("Enter number of frames: "); 
    scanf("%d", &f); 
 
    for (i = 0; i < f; i++) { 
        frames[i] = -1; 
        time[i] = 0; 
    } 
 
    printf("\n--- LRU Page Replacement ---\n"); 
 
    for (i = 0; i < n; i++) { 
        int found = 0; 
 
        // Check if page is already in frames 
        for (j = 0; j < f; j++) { 
            if (frames[j] == pages[i]) { 
                found = 1; 
                counter++; 
                time[j] = counter; // Update recent use 
                hits++; 
                break; 
            } 
        } 
 
        // If page not found, replace LRU 
        if (!found) { 
            int empty = -1; 
            for (j = 0; j < f; j++) { 
                if (frames[j] == -1) { 
                    empty = j; 
                    break; 
                } 
            } 
 
            counter++; 
            if (empty != -1) { // Empty frame available 
                frames[empty] = pages[i]; 
                time[empty] = counter; 
            } else { // No empty frame, replace LRU 
                pos = findLRU(time, f); 
                frames[pos] = pages[i]; 
                time[pos] = counter; 
            } 
            faults++; 
        } 
 
        // Print current frame status 
        printf("\nPage %2d --> ", pages[i]); 
        for (j = 0; j < f; j++) { 
            if (frames[j] == -1) 
                printf(" - "); 
            else 
                printf("%2d ", frames[j]); 
        } 
 
        if (found) 
            printf(" (Hit)"); 
        else 
            printf(" (Page Fault)"); 
    } 
 
    hit_ratio = (float)hits / n; 
    fault_ratio = (float)faults / n; 
printf("\n\nTotal Pages: %d", n); 
printf("\nTotal Page Faults: %d", faults); 
printf("\nTotal Hits: %d", hits); 
printf("\nFault Ratio: %.2f", fault_ratio); 
printf("\nHit Ratio: %.2f\n", hit_ratio); 
return 0; 
} 